<mxfile host="app.diagrams.net">
  <diagram name="第1段階照合シーケンス" id="sequence_stage1">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- アクター -->
        <mxCell id="actor_user" value="ユーザー" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="50" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        
        <!-- オブジェクト -->
        <mxCell id="obj_mainform" value="MainForm" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="150" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_balancemgr" value="BalanceManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_serialmgr" value="SerialPortManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="470" y="40" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_balance" value="天秤" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="660" y="40" width="80" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_sessionmgr" value="SessionStateManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="790" y="40" width="160" height="40" as="geometry" />
        </mxCell>
        
        <!-- ライフライン -->
        <mxCell id="lifeline_user" value="" style="endArrow=none;dashed=1;html=1;entryX=0.5;entryY=1;" edge="1" parent="1" source="actor_user">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="65" y="700" as="sourcePoint" />
            <mxPoint x="65" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_mainform" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="700" as="sourcePoint" />
            <mxPoint x="200" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_balancemgr" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="700" as="sourcePoint" />
            <mxPoint x="360" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_serialmgr" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="540" y="700" as="sourcePoint" />
            <mxPoint x="540" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_balance" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="700" y="700" as="sourcePoint" />
            <mxPoint x="700" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_sessionmgr" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="870" y="700" as="sourcePoint" />
            <mxPoint x="870" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- メッセージ -->
        <mxCell id="msg1" value="1: 照合ボタン押下" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="65" y="120" as="sourcePoint" />
            <mxPoint x="195" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg2" value="2: PerformFirstStageVerification()" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="150" as="sourcePoint" />
            <mxPoint x="200" y="180" as="targetPoint" />
            <Array as="points">
              <mxPoint x="240" y="150" />
              <mxPoint x="240" y="180" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg3" value="3: GetWeight()" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="205" y="210" as="sourcePoint" />
            <mxPoint x="355" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg4" value="4: SendCommand(&quot;S\r\n&quot;)" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="365" y="240" as="sourcePoint" />
            <mxPoint x="535" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg5" value="5: &quot;S\r\n&quot;" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="545" y="270" as="sourcePoint" />
            <mxPoint x="695" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg6" value="6: &quot;+0012.35 g\r\n&quot;" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="695" y="300" as="sourcePoint" />
            <mxPoint x="545" y="300" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg7" value="7: response" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="535" y="330" as="sourcePoint" />
            <mxPoint x="365" y="330" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg8" value="8: 数値抽出・変換" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="360" y="360" as="sourcePoint" />
            <mxPoint x="360" y="390" as="targetPoint" />
            <Array as="points">
              <mxPoint x="400" y="360" />
              <mxPoint x="400" y="390" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg9" value="9: weight (12.35)" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="355" y="420" as="sourcePoint" />
            <mxPoint x="205" y="420" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg10" value="10: ConvertWeightToCount(12.35, 1.15)" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="205" y="450" as="sourcePoint" />
            <mxPoint x="355" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg11" value="11: count (11)" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="355" y="480" as="sourcePoint" />
            <mxPoint x="205" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg12" value="12: 過不足計算" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="510" as="sourcePoint" />
            <mxPoint x="200" y="540" as="targetPoint" />
            <Array as="points">
              <mxPoint x="240" y="510" />
              <mxPoint x="240" y="540" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg13" value="13: SaveState(state)" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="205" y="570" as="sourcePoint" />
            <mxPoint x="865" y="570" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="note1" value="※OK時のみ" style="shape=note;whiteSpace=wrap;html=1;size=14;verticalAlign=top;align=left;spacingTop=-6;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="500" y="550" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="msg14" value="14: ShowMessage(&quot;照合OK...&quot;, Green)" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="200" y="620" as="sourcePoint" />
            <mxPoint x="200" y="650" as="targetPoint" />
            <Array as="points">
              <mxPoint x="280" y="620" />
              <mxPoint x="280" y="650" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg15" value="15: メッセージ表示" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="195" y="680" as="sourcePoint" />
            <mxPoint x="65" y="680" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
  <diagram name="セッション復元シーケンス" id="sequence_restore">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- アクター -->
        <mxCell id="actor_system" value="システム" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="30" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        
        <!-- オブジェクト -->
        <mxCell id="obj_mainform" value="MainForm" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="120" y="40" width="100" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_sessionmgr" value="SessionStateManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="270" y="40" width="160" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_file" value="session_state.json" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="480" y="40" width="140" height="40" as="geometry" />
        </mxCell>
        
        <mxCell id="actor_user" value="ユーザー" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;" vertex="1" parent="1">
          <mxGeometry x="670" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="obj_balancemgr" value="BalanceManager" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="750" y="40" width="120" height="40" as="geometry" />
        </mxCell>
        
        <!-- ライフライン -->
        <mxCell id="lifeline_system" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="45" y="800" as="sourcePoint" />
            <mxPoint x="45" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_mainform" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="800" as="sourcePoint" />
            <mxPoint x="170" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_sessionmgr" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="800" as="sourcePoint" />
            <mxPoint x="350" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_file" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="550" y="800" as="sourcePoint" />
            <mxPoint x="550" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_user" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="685" y="800" as="sourcePoint" />
            <mxPoint x="685" y="100" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="lifeline_balancemgr" value="" style="endArrow=none;dashed=1;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="810" y="800" as="sourcePoint" />
            <mxPoint x="810" y="80" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <!-- メッセージ -->
        <mxCell id="msg1" value="1: 起動" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="45" y="120" as="sourcePoint" />
            <mxPoint x="165" y="120" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg2" value="2: InitializeServices()" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="150" as="sourcePoint" />
            <mxPoint x="170" y="180" as="targetPoint" />
            <Array as="points">
              <mxPoint x="210" y="150" />
              <mxPoint x="210" y="180" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg3" value="3: LoadState()" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="175" y="210" as="sourcePoint" />
            <mxPoint x="345" y="210" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg4" value="4: JSON読込" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="355" y="240" as="sourcePoint" />
            <mxPoint x="545" y="240" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg5" value="5: JSON文字列" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="545" y="270" as="sourcePoint" />
            <mxPoint x="355" y="270" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg6" value="6: JSON → SessionState変換" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="350" y="300" as="sourcePoint" />
            <mxPoint x="350" y="330" as="targetPoint" />
            <Array as="points">
              <mxPoint x="420" y="300" />
              <mxPoint x="420" y="330" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg7" value="7: SessionState" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="345" y="360" as="sourcePoint" />
            <mxPoint x="175" y="360" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg8" value="8: Stage = 1 判定" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="390" as="sourcePoint" />
            <mxPoint x="170" y="420" as="targetPoint" />
            <Array as="points">
              <mxPoint x="210" y="390" />
              <mxPoint x="210" y="420" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg9" value="9: 復元確認ダイアログ" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="175" y="450" as="sourcePoint" />
            <mxPoint x="680" y="450" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg10" value="10: はい選択" style="endArrow=classic;html=1;dashed=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="680" y="480" as="sourcePoint" />
            <mxPoint x="175" y="480" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg11" value="11: RestoreSession(savedState)" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="510" as="sourcePoint" />
            <mxPoint x="170" y="540" as="targetPoint" />
            <Array as="points">
              <mxPoint x="250" y="510" />
              <mxPoint x="250" y="540" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg12" value="12: RemoveHandler txtEmployeeNo.TextChanged" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="570" as="sourcePoint" />
            <mxPoint x="170" y="600" as="targetPoint" />
            <Array as="points">
              <mxPoint x="280" y="570" />
              <mxPoint x="280" y="600" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg13" value="13: 従業員情報復元" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="630" as="sourcePoint" />
            <mxPoint x="170" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="260" y="630" />
              <mxPoint x="260" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg14" value="14: AddHandler txtEmployeeNo.TextChanged" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="690" as="sourcePoint" />
            <mxPoint x="170" y="720" as="targetPoint" />
            <Array as="points">
              <mxPoint x="280" y="690" />
              <mxPoint x="280" y="720" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="msg15" value="15: カード情報・照合結果復元" style="endArrow=classic;html=1;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="170" y="750" as="sourcePoint" />
            <mxPoint x="170" y="780" as="targetPoint" />
            <Array as="points">
              <mxPoint x="280" y="750" />
              <mxPoint x="280" y="780" />
            </Array>
          </mxGeometry>
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
  
  <diagram name="状態遷移図" id="state_transition">
    <mxGraphModel dx="1422" dy="794" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1169" pageHeight="827" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        
        <!-- 状態 -->
        <mxCell id="state_initial" value="初期状態&#xa;(_verificationStage = 0)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="80" y="80" width="160" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="state_employee_auth" value="従業員認証完了&#xa;(_verificationStage = 0)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="320" y="80" width="180" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="state_card_loaded" value="カード情報取得完了&#xa;(_verificationStage = 0)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="570" y="80" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="state_stage1_done" value="第1段階完了&#xa;(_verificationStage = 1)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" vertex="1" parent="1">
          <mxGeometry x="570" y="250" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="state_verification_done" value="照合完了&#xa;(_verificationStage = 2)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" vertex="1" parent="1">
          <mxGeometry x="570" y="420" width="200" height="60" as="geometry" />
        </mxCell>
        
        <mxCell id="state_shelf_storage" value="棚入庫画面表示" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" vertex="1" parent="1">
          <mxGeometry x="320" y="420" width="180" height="60" as="geometry" />
        </mxCell>
        
        <!-- 初期状態マーカー -->
        <mxCell id="start_marker" value="" style="ellipse;fillColor=#000000;strokeColor=none;" vertex="1" parent="1">
          <mxGeometry x="30" y="100" width="20" height="20" as="geometry" />
        </mxCell>
        
        <!-- 遷移 -->
        <mxCell id="trans1" value="" style="endArrow=classic;html=1;" edge="1" parent="1" source="start_marker" target="state_initial">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans2" value="従業員No入力" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_initial" target="state_employee_auth">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans3" value="カードNo、LAP厚入力" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_employee_auth" target="state_card_loaded">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans4" value="照合ボタン押下&#xa;（第1段階照合OK）" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_card_loaded" target="state_stage1_done">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans5" value="照合ボタン押下&#xa;（第1段階照合NG）" style="endArrow=classic;html=1;dashed=1;strokeColor=#ff0000;" edge="1" parent="1" source="state_card_loaded" target="state_card_loaded">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="820" y="110" />
              <mxPoint x="820" y="170" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans6" value="照合ボタン押下&#xa;（第2段階照合OK）" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_stage1_done" target="state_verification_done">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans7" value="照合ボタン押下&#xa;（第2段階照合NG）" style="endArrow=classic;html=1;dashed=1;strokeColor=#ff0000;" edge="1" parent="1" source="state_stage1_done" target="state_stage1_done">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="820" y="280" />
              <mxPoint x="820" y="340" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans8" value="棚入庫ボタン押下" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_verification_done" target="state_shelf_storage">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans9" value="キャンセルボタン押下" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_verification_done" target="state_initial">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="670" y="550" />
              <mxPoint x="160" y="550" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <mxCell id="trans10" value="閉じる" style="endArrow=classic;html=1;" edge="1" parent="1" source="state_shelf_storage" target="state_initial">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="400" y="300" as="sourcePoint" />
            <mxPoint x="450" y="250" as="targetPoint" />
            <Array as="points">
              <mxPoint x="160" y="450" />
            </Array>
          </mxGeometry>
        </mxCell>
        
        <!-- 凡例 -->
        <mxCell id="legend_box" value="凡例" style="rounded=0;whiteSpace=wrap;html=1;fillColor=#f5f5f5;strokeColor=#666666;align=left;verticalAlign=top;fontStyle=1" vertex="1" parent="1">
          <mxGeometry x="900" y="80" width="220" height="120" as="geometry" />
        </mxCell>
        
        <mxCell id="legend1" value="通常遷移" style="endArrow=classic;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="110" as="sourcePoint" />
            <mxPoint x="1000" y="110" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="legend2" value="エラー時" style="endArrow=classic;html=1;dashed=1;strokeColor=#ff0000;" edge="1" parent="1">
          <mxGeometry width="50" height="50" relative="1" as="geometry">
            <mxPoint x="920" y="140" as="sourcePoint" />
            <mxPoint x="1000" y="140" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        
        <mxCell id="legend3" value="" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" vertex="1" parent="1">
          <mxGeometry x="920" y="160" width="30" height="20" as="geometry" />
        </mxCell>
        <mxCell id="legend3_text" value="初期段階" style="text;html=1;strokeColor=none;fillColor=none;align=left;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="960" y="157" width="100" height="25" as="geometry" />
        </mxCell>
        
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>