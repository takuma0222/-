# 実装検証チェックリスト

このドキュメントは、実装が仕様通りに完了しているかを確認するためのチェックリストです。

## 📋 基本機能チェック

### UI コンポーネント
- [ ] 従業員No入力フィールド（6桁、半角英数字）
- [ ] カードNo入力フィールド（6桁、半角英数字）
- [ ] 照合ボタン（初期状態: 無効）
- [ ] キャンセルボタン
- [ ] メッセージ表示ラベル（最大30文字）
- [ ] 使用部材条件テーブル（5列: 1mm, 5mm, 10mm, エッジガード, 気泡緩衝材）

### 入力検証
- [ ] 従業員No: 6桁チェック
- [ ] 従業員No: 半角英数字のみ許可
- [ ] カードNo: 6桁チェック
- [ ] カードNo: 半角英数字のみ許可
- [ ] 不正入力時のエラーメッセージ表示

### カード条件表示
- [ ] カードNo入力後、自動的に条件を検索
- [ ] 条件が存在する場合、テーブルに表示
- [ ] 条件が存在しない場合、「条件なし」表示
- [ ] 条件なしの場合、照合ボタンは無効のまま

### 初回計測
- [ ] 条件表示後、自動的に3台から計測値を取得
- [ ] Pre_10mm の計測値取得
- [ ] Post_1mm の計測値取得
- [ ] Post_5mm の計測値取得
- [ ] 計測成功後、照合ボタンを有効化
- [ ] 計測成功メッセージ表示（緑色）

### 照合機能
- [ ] 照合ボタンクリックで照合時計測を実行
- [ ] 3台から再度計測値を取得
- [ ] 差分計算（照合時 - 初回）
- [ ] 3項目の予定数と差分を比較
  - [ ] 投入前10mmクッション材
  - [ ] 投入後1mmクッション材
  - [ ] 投入後5mmクッション材

### 合否判定
- [ ] すべて一致 → 「検査合格」（緑色）
- [ ] 不一致あり → 「NG: 項目名:差分≠予定」（赤色）
- [ ] 合格時、照合ボタンを無効化
- [ ] 不合格時、照合ボタンは有効のまま（再試行可能）

### キャンセル機能
- [ ] キャンセルボタンクリックで初期画面へリセット
- [ ] 入力フィールドをクリア
- [ ] テーブルをクリア
- [ ] メッセージを初期状態に戻す
- [ ] 照合ボタンを無効化

## 📡 通信機能チェック

### シリアルポート設定
- [ ] appsettings.json からポート設定を読み込み
- [ ] 3台のバランス設定を保持
- [ ] 各バランスに論理名を設定（Pre_10mm, Post_1mm, Post_5mm）
- [ ] COMポート名、ボーレート、データビット、パリティ、ストップビットの設定

### 通信処理
- [ ] COMポートのオープン
- [ ] Qコマンドの送信
- [ ] 応答の受信（ST,GS,+0000.00g 形式）
- [ ] 応答のパース（重量値の抽出）
- [ ] タイムアウト処理（設定可能）
- [ ] リトライ処理（設定可能回数）
- [ ] COMポートのクローズ

### エラーハンドリング
- [ ] ポートオープン失敗時のエラーメッセージ
- [ ] タイムアウト時のエラーメッセージ
- [ ] パース失敗時のエラーメッセージ
- [ ] エラーログへの記録

## 📝 ログ機能チェック

### 検査ログ
- [ ] logs/yyyyMMdd.csv に記録
- [ ] ヘッダー行（初回のみ）: Timestamp,EmployeeNo,CardNo,Pre10mm,Post1mm,Post5mm,Post10mm,EdgeGuard,BubbleInterference,Result
- [ ] データ行: 各項目のカンマ区切り
- [ ] UTF-8 BOM形式で保存
- [ ] 日次ローテーション（日付変更で新ファイル）

### エラーログ
- [ ] logs/error/yyyy-MM-dd.log に記録
- [ ] タイムスタンプ付きエラーメッセージ
- [ ] UTF-8 BOM形式で保存

## ⚙️ 設定ファイルチェック

### appsettings.json
- [ ] 初回起動時に自動生成
- [ ] LogDirectory: ログ出力先
- [ ] CardConditionCsvPath: CSV条件ファイルパス
- [ ] ReadTimeoutMs: タイムアウト時間
- [ ] MaxRetries: リトライ回数
- [ ] Balances: 3台の天秤設定配列
- [ ] JSON形式で読み書き可能

### card_conditions.csv
- [ ] 初回起動時にサンプルを自動生成
- [ ] UTF-8 BOM形式
- [ ] ヘッダー行: CardNo,投入前10mmクッション材,投入後1mmクッション材,投入後5mmクッション材,投入後10mmクッション材,エッジガード,気泡緩衝材
- [ ] データ行: カンマ区切り
- [ ] カード番号による検索が可能

## 📚 ドキュメントチェック

### ユーザー向け
- [ ] README.md: プロジェクト概要
- [ ] QUICKSTART.md: クイックスタートガイド
- [ ] USER_MANUAL.md: 操作マニュアル
- [ ] examples/README.md: サンプルファイル説明

### 開発者向け
- [ ] BUILD.md: ビルド手順
- [ ] DEPLOYMENT.md: デプロイ手順
- [ ] TECHNICAL_SPEC.md: 技術仕様書
- [ ] FLOW_DIAGRAMS.md: フロー図
- [ ] PROJECT_SUMMARY.md: 実装サマリー

## 🔧 ビルドチェック

### プロジェクトファイル
- [ ] BalanceInspection.sln: ソリューションファイル
- [ ] BalanceInspection.vbproj: プロジェクトファイル
- [ ] App.config: アプリケーション設定
- [ ] packages.config: NuGetパッケージ設定

### ソースコード
- [ ] MainForm.vb: メインフォーム実装
- [ ] MainForm.Designer.vb: フォームデザイナー
- [ ] Models/AppConfig.vb: 設定モデル
- [ ] Models/BalanceConfig.vb: バランス設定モデル
- [ ] Models/CardCondition.vb: カード条件モデル
- [ ] Services/ConfigLoader.vb: 設定読み込み
- [ ] Services/CardConditionLoader.vb: CSV読み込み
- [ ] Services/SerialPortManager.vb: シリアル通信
- [ ] Services/BalanceManager.vb: バランス管理
- [ ] Services/LogManager.vb: ログ管理

### ビルド
- [ ] NuGetパッケージのリストア成功
- [ ] ビルドエラーなし
- [ ] 実行ファイル生成（BalanceInspection.exe）

## 🧪 テストシナリオ

### シナリオ1: 正常系（合格）
1. [ ] アプリケーション起動
2. [ ] 従業員No入力: 123456
3. [ ] カードNo入力: e00123
4. [ ] 使用部材条件表示確認
5. [ ] 初回計測成功確認
6. [ ] 照合ボタン有効化確認
7. [ ] 部材を投入（予定数通り）
8. [ ] 照合ボタンクリック
9. [ ] 「検査合格」表示確認（緑色）
10. [ ] ログファイル記録確認
11. [ ] 照合ボタン無効化確認

### シナリオ2: 正常系（不合格）
1. [ ] アプリケーション起動
2. [ ] 従業員No入力: 123456
3. [ ] カードNo入力: e00123
4. [ ] 使用部材条件表示確認
5. [ ] 初回計測成功確認
6. [ ] 部材を投入（予定数と異なる）
7. [ ] 照合ボタンクリック
8. [ ] NG メッセージ表示確認（赤色）
9. [ ] 不一致項目の表示確認
10. [ ] ログファイル記録確認（Result=NG）
11. [ ] 照合ボタン有効のまま確認

### シナリオ3: 異常系（条件なし）
1. [ ] アプリケーション起動
2. [ ] 従業員No入力: 123456
3. [ ] カードNo入力: 999999（存在しない）
4. [ ] 「条件なし」表示確認
5. [ ] 照合ボタン無効確認

### シナリオ4: 異常系（入力エラー）
1. [ ] アプリケーション起動
2. [ ] 従業員No入力: 12345（5桁）
3. [ ] エラーメッセージ表示確認
4. [ ] カードNo入力: 123（3桁）
5. [ ] エラーメッセージ表示確認

### シナリオ5: キャンセル機能
1. [ ] アプリケーション起動
2. [ ] 従業員No入力: 123456
3. [ ] カードNo入力: e00123
4. [ ] キャンセルボタンクリック
5. [ ] 初期画面へリセット確認
6. [ ] すべての入力フィールドクリア確認

## 📊 パフォーマンスチェック

- [ ] 初回計測時間（3台順次）: 約3-6秒
- [ ] 照合時計測時間（3台順次）: 約3-6秒
- [ ] UI応答性: 計測中も応答性を維持
- [ ] メモリ使用量: 約30-40MB

## 🔒 セキュリティチェック

- [ ] ログファイルへのアクセス制御（OS依存）
- [ ] 設定ファイルの読み取り権限確認
- [ ] エラーメッセージに機密情報が含まれていないこと

## 🌐 互換性チェック

### OS
- [ ] Windows 7 SP1以降
- [ ] Windows 10
- [ ] Windows 11

### .NET Framework
- [ ] .NET Framework 4.8

### ハードウェア
- [ ] A&D EK-2000i × 3台
- [ ] RS-232Cポート × 3（またはUSB変換アダプタ）

## ✅ 最終チェック

- [ ] すべての要件が実装されている
- [ ] すべてのドキュメントが作成されている
- [ ] サンプルファイルが用意されている
- [ ] ビルドが成功する
- [ ] 基本的な動作確認が完了している
- [ ] エラーハンドリングが適切に実装されている
- [ ] ログ機能が正常に動作する

---

## 注意事項

- 実機（EK-2000i）がない場合、通信機能のテストはエラーとなりますが、UIの動作確認は可能です
- 実機テストを行う前に、デバイスマネージャーでCOMポート番号を確認し、appsettings.jsonを更新してください
- 初回起動時は設定ファイルが自動生成されますが、実際の環境に合わせて編集が必要です

## テスト完了後

すべてのチェック項目が完了したら、以下を実施してください：

1. テスト結果を記録
2. 発見された問題をIssueとして登録
3. 必要に応じて修正を実施
4. 実機での最終動作確認
5. 本番環境へのデプロイ

---

**作成日**: 2024年
**バージョン**: 1.0.0
